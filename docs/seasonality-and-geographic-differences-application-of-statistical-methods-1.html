<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Seasonality and Geographic Differences – Application of Statistical Methods | Data Science Project Guide: Honey and Bees</title>
  <meta name="description" content="Everything you need to know for your successful TechAcademy Data Science Project" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Seasonality and Geographic Differences – Application of Statistical Methods | Data Science Project Guide: Honey and Bees" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Everything you need to know for your successful TechAcademy Data Science Project" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Seasonality and Geographic Differences – Application of Statistical Methods | Data Science Project Guide: Honey and Bees" />
  
  <meta name="twitter:description" content="Everything you need to know for your successful TechAcademy Data Science Project" />
  

<meta name="author" content="TechAcademy e.V." />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exploratory-data-analysis.html"/>
<link rel="next" href="exercise-checklist.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="plot/TA_Logo.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome!<span></span></a></li>
<li class="chapter" data-level="2" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html"><i class="fa fa-check"></i><b>2</b> What’s Data Science and How Do I Do It?<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html#whats-r"><i class="fa fa-check"></i><b>2.1</b> What’s R?<span></span></a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html#rstudio-cloud"><i class="fa fa-check"></i><b>2.1.1</b> RStudio Cloud<span></span></a></li>
<li class="chapter" data-level="2.1.2" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html#curriculum"><i class="fa fa-check"></i><b>2.1.2</b> Curriculum<span></span></a></li>
<li class="chapter" data-level="2.1.3" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html#helpful-links"><i class="fa fa-check"></i><b>2.1.3</b> Helpful Links<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html#whats-python"><i class="fa fa-check"></i><b>2.2</b> What’s Python?<span></span></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html#anaconda-and-jupyter"><i class="fa fa-check"></i><b>2.2.1</b> Anaconda and Jupyter<span></span></a></li>
<li class="chapter" data-level="2.2.2" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html#curriculum-1"><i class="fa fa-check"></i><b>2.2.2</b> Curriculum<span></span></a></li>
<li class="chapter" data-level="2.2.3" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html#helpful-links-1"><i class="fa fa-check"></i><b>2.2.3</b> Helpful Links<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html#your-data-science-project"><i class="fa fa-check"></i><b>2.3</b> Your Data Science Project<span></span></a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html#prelude"><i class="fa fa-check"></i><b>2.3.1</b> Prelude<span></span></a></li>
<li class="chapter" data-level="2.3.2" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html#coding-meetups"><i class="fa fa-check"></i><b>2.3.2</b> Coding Meetups<span></span></a></li>
<li class="chapter" data-level="2.3.3" data-path="whats-data-science-and-how-do-i-do-it.html"><a href="whats-data-science-and-how-do-i-do-it.html#deadline"><i class="fa fa-check"></i><b>2.3.3</b> Deadline<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-your-project.html"><a href="introduction-to-your-project.html"><i class="fa fa-check"></i><b>3</b> Introduction to Your Project<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-your-project.html"><a href="introduction-to-your-project.html#purpose-of-the-project-guide"><i class="fa fa-check"></i><b>3.1</b> Purpose of the Project Guide<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-your-project.html"><a href="introduction-to-your-project.html#what-is-this-project-about"><i class="fa fa-check"></i><b>3.2</b> What is this Project About?<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-your-project.html"><a href="introduction-to-your-project.html#exploratory-data-analysis-getting-to-know-the-data-set"><i class="fa fa-check"></i><b>3.3</b> Exploratory Data Analysis – Getting to Know the Data Set<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-your-project.html"><a href="introduction-to-your-project.html#seasonality-and-geographic-differences-application-of-statistical-methods"><i class="fa fa-check"></i><b>3.4</b> Seasonality and Geographic Differences – Application of Statistical Methods<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>4</b> Exploratory Data Analysis<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exploring-honey-and-bees-data"><i class="fa fa-check"></i><b>4.1</b> Exploring Honey and Bees Data<span></span></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#discovering-the-data"><i class="fa fa-check"></i><b>4.1.1</b> Discovering the Data<span></span></a></li>
<li class="chapter" data-level="4.1.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#give-some-overall-statements"><i class="fa fa-check"></i><b>4.1.2</b> Give some overall statements<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#data-cleaning-and-useful-transformations"><i class="fa fa-check"></i><b>4.2</b> Data Cleaning and Useful Transformations<span></span></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#date-formatting"><i class="fa fa-check"></i><b>4.2.1</b> Date Formatting<span></span></a></li>
<li class="chapter" data-level="4.2.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#more-data-types"><i class="fa fa-check"></i><b>4.2.2</b> More Data Types<span></span></a></li>
<li class="chapter" data-level="4.2.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#converting-units"><i class="fa fa-check"></i><b>4.2.3</b> Converting Units<span></span></a></li>
<li class="chapter" data-level="4.2.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#rounding"><i class="fa fa-check"></i><b>4.2.4</b> Rounding<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#simple-metrics"><i class="fa fa-check"></i><b>4.3</b> Simple Metrics<span></span></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#missing-values"><i class="fa fa-check"></i><b>4.3.1</b> Missing Values<span></span></a></li>
<li class="chapter" data-level="4.3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#lost-colonies"><i class="fa fa-check"></i><b>4.3.2</b> Lost Colonies<span></span></a></li>
<li class="chapter" data-level="4.3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#group-means"><i class="fa fa-check"></i><b>4.3.3</b> Group Means<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#merging-data-sets"><i class="fa fa-check"></i><b>4.4</b> Merging Data Sets<span></span></a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#Merging"><i class="fa fa-check"></i><b>4.4.1</b> Joint Honey and Bees Set<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#states-bar-plot"><i class="fa fa-check"></i><b>4.5</b> States Bar Plot<span></span></a></li>
<li class="chapter" data-level="4.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#splitting-the-data-set"><i class="fa fa-check"></i><b>4.6</b> Splitting the Data Set<span></span></a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#yearly-boxplots"><i class="fa fa-check"></i><b>4.6.1</b> Yearly Boxplots<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualization-with-maps"><i class="fa fa-check"></i><b>4.7</b> Visualization with Maps<span></span></a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#geographic-map-with-state-pop-ups"><i class="fa fa-check"></i><b>4.7.1</b> Geographic Map with State Pop-ups<span></span></a></li>
<li class="chapter" data-level="4.7.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#animating-changes-over-time"><i class="fa fa-check"></i><b>4.7.2</b> Animating Changes over Time<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#surprise-us"><i class="fa fa-check"></i><b>4.8</b> Surprise Us!<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><i class="fa fa-check"></i><b>5</b> Seasonality and Geographic Differences – Application of Statistical Methods<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#merging-bees-and-weather"><i class="fa fa-check"></i><b>5.1</b> Merging Bees and Weather<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#correlations"><i class="fa fa-check"></i><b>5.2</b> Correlations<span></span></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#naive-approach"><i class="fa fa-check"></i><b>5.2.1</b> Naive Approach<span></span></a></li>
<li class="chapter" data-level="5.2.2" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#statewise-correlations---seasonality-geography"><i class="fa fa-check"></i><b>5.2.2</b> Statewise Correlations - Seasonality &amp; Geography<span></span></a></li>
<li class="chapter" data-level="5.2.3" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#demeaned-variables"><i class="fa fa-check"></i><b>5.2.3</b> Demeaned Variables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#pooled-ols-for-state-panel-data"><i class="fa fa-check"></i><b>5.3</b> Pooled OLS for State Panel Data<span></span></a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#seasonality-specification"><i class="fa fa-check"></i><b>5.3.1</b> Seasonality Specification<span></span></a></li>
<li class="chapter" data-level="5.3.2" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#adding-geographic-aspects"><i class="fa fa-check"></i><b>5.3.2</b> Adding Geographic Aspects<span></span></a></li>
<li class="chapter" data-level="5.3.3" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#adding-indicators-for-weather-and-parasite-infestation"><i class="fa fa-check"></i><b>5.3.3</b> Adding indicators for weather and parasite infestation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#alternative-model"><i class="fa fa-check"></i><b>5.4</b> Alternative Model<span></span></a></li>
<li class="chapter" data-level="5.5" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#model-evaluation"><i class="fa fa-check"></i><b>5.5</b> Model Evaluation<span></span></a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#residuals-distribution-in-sample"><i class="fa fa-check"></i><b>5.5.1</b> Residuals Distribution (in-sample)<span></span></a></li>
<li class="chapter" data-level="5.5.2" data-path="seasonality-and-geographic-differences-application-of-statistical-methods-1.html"><a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#model-selection"><i class="fa fa-check"></i><b>5.5.2</b> Model Selection<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="exercise-checklist.html"><a href="exercise-checklist.html"><i class="fa fa-check"></i><b>6</b> Exercise Checklist<span></span></a></li>
<li class="chapter" data-level="7" data-path="whats-next-in-your-data-science-career.html"><a href="whats-next-in-your-data-science-career.html"><i class="fa fa-check"></i><b>7</b> What’s Next in Your Data Science Career?<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="whats-next-in-your-data-science-career.html"><a href="whats-next-in-your-data-science-career.html#data-science-in-general"><i class="fa fa-check"></i><b>7.1</b> Data Science in General<span></span></a></li>
<li class="chapter" data-level="7.2" data-path="whats-next-in-your-data-science-career.html"><a href="whats-next-in-your-data-science-career.html#r"><i class="fa fa-check"></i><b>7.2</b> R<span></span></a></li>
<li class="chapter" data-level="7.3" data-path="whats-next-in-your-data-science-career.html"><a href="whats-next-in-your-data-science-career.html#python"><i class="fa fa-check"></i><b>7.3</b> Python<span></span></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://tech-academy.io/" target="blank">&copy 2022 TechAcademy e.V.</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science Project Guide: Honey and Bees</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div class="hero-image-container"> 
  <img class= "hero-image" src="images/pexels-pixabay-164470.jpg">
</div>
<div id="seasonality-and-geographic-differences-application-of-statistical-methods-1" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Seasonality and Geographic Differences – Application of Statistical Methods<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#seasonality-and-geographic-differences-application-of-statistical-methods-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="merging-bees-and-weather" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Merging Bees and Weather<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#merging-bees-and-weather" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The first part was hopefully easy for the more advanced of you.
Let’s continue with some more challenging exercises!
We want to investigate how diseases and different climates affect our beloved bee populations.
To that end, you now need to merge the two data sets “Bees” and “Weather.”
Be careful when aggregating the daily weather data set to quarterly data.
It might not be clever to replace period-specific max/min values with a mean.</p>
<p>If you get lost, you might want to compare your approach to your solution of <a href="exploratory-data-analysis.html#Merging">4.4.1</a>.</p>
<p>Please note that there is no weather data for <strong>Florida</strong> and <strong>New Mexico</strong>, you should exclude these states.</p>
</div>
<div id="correlations" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Correlations<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#correlations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="naive-approach" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Naive Approach<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#naive-approach" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Do a simple correlations plot between variables of your interest.
This could be lost colonies, different parasites, and weather indicators for example.</p>
<p><img src="plot/Correlations%20using%20Pearson%20Method.jpg" width="100%" style="display: block; margin: auto;" /></p>
<ul>
<li>We have a question for you: Why is a naive correlation matrix across states likely a bad idea? Think for example about omitted variables and how information is lost when you aggregate fundamentally different groups.</li>
</ul>
<div class="tips r">
<p>Add tip</p>
</div>
<div class="tipsp python">
<p>A handy library for plotting correlation matrices is the <a href="https://seaborn.pydata.org/">seaborn library</a>:</p>
<pre><code>import seaborn as sns
...</code></pre>
<p>You can use its <code>pairplot</code> method and pass on the data frame with the selected columns to visualize distributions and correlations.</p>
<p>Alternatively/Additionally, you may want to plot a heatmap with <code>sns.heatmap(...)</code> which makes it even easier to see correlations.</p>
</div>
</div>
<div id="statewise-correlations---seasonality-geography" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Statewise Correlations - Seasonality &amp; Geography<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#statewise-correlations---seasonality-geography" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Our cross-section of states is characterized by heterogeneous geography and climate.
Naturally, this also implies seasonality in our quarterly data set.
However, Hawaii’s seasons are less pronounced than they are in North Dakota (if you do not believe us, check the max temperature differential …).</p>
<p>To Visualize this, you want to compute statewise correlations for either “Lost Colonies,” “log Lost Colonies” or “percent Lost Colonies” and sort them by latitude.</p>
<p>Below are some examples:</p>
<p><img src="plot/State%20Correlations%20sorted%20by%20Latitude%20-%20Lost%20Colonies%20and%20Quarter%20Dummies%20ex%20Hawaii.jpg" width="100%" style="display: block; margin: auto;" /></p>
<p><img src="plot/State%20Correlations%20sorted%20by%20Latitude%20-%20Lost%20Colonies%20Percent%20and%20Quarter%20Dummies%20ex%20Hawaii.jpg" width="100%" style="display: block; margin: auto;" />
Note, that there might also be interaction effects, e.g. the season/climate influences the parasite population or the like.</p>
<p><img src="plot/Seasonal%20(temperature-related)%20Parasite%20Infestation.jpg" width="100%" style="display: block; margin: auto;" /></p>
<div class="tips r">
<p>Add tip</p>
</div>
<div class="tipsp python">
<p>You should be fairly familiar with <code>groupby</code> statements by now. To sort by an underlying property of the index values, it might be of help to calculate correlations in one data frame and get a list of ordered states from another using <code>.reset_index()</code>, <code>.drop_duplicates()</code>, and <code>.sort_values()</code>. Subsequently, you can easily use <code>.reindex()</code>.</p>
</div>
</div>
<div id="demeaned-variables" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Demeaned Variables<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#demeaned-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create at least two own indications that you might want to use in the following regressions which can mitigate some of the issues:</p>
<ul>
<li><p>One Measure that subtracts a quarter aggregate (median, mean …) over ALL states but by quarter (4 values in total) from each observation with that respective quarter</p></li>
<li><p>One Measure that subtracts a quarter aggregate by state AND quarter (values equal to the number of states * 4) from all observations with the respective state and quarter</p></li>
</ul>
<p><strong>Example for the 2nd</strong>: You create a measure of “abnormal” temperature by subtracting the average temperature of a given state in each quarter from the state’s quarter observation in all years (6 years in total) in the data set.</p>
<p>Additionally, add quarter dummies to your data frame.</p>
<div class="tips r">
<p>Add tip</p>
</div>
<div class="tipsp python">
<p>You best work with a <code>Multiindex</code> and employ the <code>.dt.quarter</code> property of <code>Datetime</code> columns.
After aggregating, you can merge the values back as an additional column and simply subtract as well as reassign the result.</p>
</div>
</div>
</div>
<div id="pooled-ols-for-state-panel-data" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Pooled OLS for State Panel Data<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#pooled-ols-for-state-panel-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As we investigated correlation patterns above, we saw that panel data is not straightforward to analyze. Especially since we are only equipped with quarterly data of mere 6 years - That’s not a lot.
But you have just added a few more “normalized” variables, so we can get started with our regressions in the hope to make some interesting findings.</p>
<p>With panel data the basic extension of OLS (Ordinary Least Squares) regression is Pooled OLS.
A basic Pooled OLS regression equation could look like this (a simple extension of classic OLS with state effects <span class="math inline">\(\alpha_i\)</span> and error term <span class="math inline">\(\epsilon_{i,t}\)</span>:</p>
<p><span class="math display">\[
percent\_lost\_colonies_{i, t} = \mu + \beta_{1,i} \cdot varroa\_mites_{i, t} + \beta_2 \cdot quarter_1 + \dots + \alpha_i + \epsilon_{i,t}
\]</span></p>
<div id="seasonality-specification" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Seasonality Specification<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#seasonality-specification" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Compute pooled OLS regression estimates that reflect only seasonal aspects.
Subsequently, you will extend this model below. At the end of this section is a [#table] that may serve as an indication of what the end result could look like.</p>
<div class="tips r">
<p>Add tip</p>
</div>
<div class="tipsp python">
<p>A classic package for inference is <a href="https://www.statsmodels.org/stable/generated/statsmodels.regression.linear_model.OLS.html#statsmodels.regression.linear_model.OLS">statsmodels</a>. Standard OLS is pretty straightforward but not needed here.
<a href="https://pypi.org/project/linearmodels/">linearmodels</a> is an extension library that supports the analysis of panel data.</p>
</div>
</div>
<div id="adding-geographic-aspects" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Adding Geographic Aspects<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#adding-geographic-aspects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Extend your specification from above with at least one variable that reflects each states “unique” geography.
Whenever you add more variables be careful to avoid (multi-) collinearity (= your regressors are highly correlated among themselves).</p>
</div>
<div id="adding-indicators-for-weather-and-parasite-infestation" class="section level3 hasAnchor" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Adding indicators for weather and parasite infestation<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#adding-indicators-for-weather-and-parasite-infestation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Last but not least add variables (maybe some of the ones created above) that can explain even more, considering for example weather extrema and parasite infestation.</p>
<p>When you compare all the <span class="math inline">\(R^2\)</span> of the different specifications with special attention to <em>within</em> and <em>between</em> <span class="math inline">\(R^2\)</span> what do you observe?</p>
<p><img src="plot/Regression_Table_POLS_only.PNG" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="alternative-model" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Alternative Model<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#alternative-model" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You are completely free here. You want to check out a machine-learning approach and compare? This is your chance!
All you have to do is estimate an alternative model (so not pooled OLS again) whose properties you can compare in a later stage.</p>
</div>
<div id="model-evaluation" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Model Evaluation<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#model-evaluation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Model evaluation is always important, even more so when using different frameworks that you would like to compare.
At the end of the day, we are interested in the model that reflects our empirical observations best.</p>
<div id="residuals-distribution-in-sample" class="section level3 hasAnchor" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Residuals Distribution (in-sample)<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#residuals-distribution-in-sample" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When computing regression estimates the residuals as unexplained fraction of your model are the most important aspect to look at. Especially since each model assumes a certain distribution (normal most of the time). We must check whether these assumptions hold.
Typical related questions are whether they are auto-correlated and whether the standard errors are computed robust (e.g. test for the presence of heteroscedasticity etc.).</p>
<p>Plot the residuals of one of your pooled OLS specifications and the ones of your alternative model. Do they differ fundamentally?</p>
<div class="tips r">
<p>Add tip</p>
</div>
<div class="tipsp python">
<p>Your fitted models will have something like a <code>.predict()</code> method which also yields the in-sample fitted values. Moreover, the fitted model will automatically compute the residuals, for example the <code>.resids</code> attribute that you can work with.
Of course you could also use the regression estimates to compute both values yourself!</p>
</div>
<p><img src="plot/Pooled%20OLS%20Aggregate%20Residuals.jpg" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="model-selection" class="section level3 hasAnchor" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Model Selection<a href="seasonality-and-geographic-differences-application-of-statistical-methods-1.html#model-selection" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As a wrap-up, by considering the different specifications as well as your alternative model, write a few sentences about which specification/model you believe to be best-suited for the underlying data.</p>
<p><strong>Congratulations!</strong> You’ve made it to the end of your TechAcademy Data Science project. After visualizing the data in the first part, you’ve also set up a statistical analysis in this section. If you stuck around until this part and managed to code the better part of the exercises, you’ve definitely earned your certificate! We hope you had fun learning Data Science with this combination of data sets and enjoyed it – at least the parts where you didn’t get stuck forever because of some unexplainable coding error. Don’t forget to send your project results to our project submission email address before the deadline (<strong>03.07.2022, 23:59</strong>).
Thanks for being a part of TechAcademy!</p>

<div style="page-break-after: always;"></div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exploratory-data-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exercise-checklist.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["honey_and_bees.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
